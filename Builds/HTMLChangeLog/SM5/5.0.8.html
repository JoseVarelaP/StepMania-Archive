<meta charset="UTF-8">
<div class="markdown-body">
    <p>StepMania 5.0.8; release notes compiled and Markdown formatted by <a class="user-mention" data-hovercard-type="user" data-hovercard-url="/users/kyzentun/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/kyzentun">@kyzentun</a>:</p>
<h3>This is divided into two sections:</h3>
<ul>
<li>Player visible changes:  New configuration options players should try out,</li>
<li>Themer visible changes:  New (optional) screens that themes can support, new metrics or lua functions, or fixes for existing functions.</li>
</ul>
<p>Items are roughly grouped into the general part of StepMania they fit into.</p>
<h1>Compiling:</h1>
<p>Cmake is now the only method supported for compiling Stepmania.  Read Build/README.md for instructions.<br>
Some Linux users may need to pass <code>-DWITH_LIBVA=ON</code> and/or <code>-DWITH_CRYSTALHD_DISABLED=ON</code> to cmake when compiling.<br>
There is a binary package for Linux which was built on amd64 debian.  If it doesn't work, compile from the source instead.</p>
<h1>Player visible changes:</h1>
<h2>Service Menu:</h2>
<p>Entries in service menu rearranged to hopefully organize them better.<br>
<code>Test Input</code>, <code>Input Options</code>, and <code>Calibrate Machine Sync</code> are now under <code>Input Options</code>.<br>
<code>Appearance Options</code>, <code>Set BG Fit Mode</code>, and <code>UI Options</code> are now under <code>Display Options</code>.</p>
<h2>Edit Mode:</h2>
<ul>
<li>Added submenus to the timing edit menu to allow shifting, copying, and<br>
pasting any or all timing segments in the selected region or after the<br>
current cursor position.</li>
<li>Shifting menus in edit mode now have choices for 1, 2, or 4 measures or 2<br>
beats.</li>
<li>Revert From Disk actually works now.</li>
<li>Fixed bug that made alter menu choices prompt for clearing.</li>
</ul>
<h2>Gameplay:</h2>
<ul>
<li>Holding Select on gameplay now skips the current song in course or endless<br>
mode.  This is meant to address the problem some people had where they were<br>
unable to skip songs in endless mode.</li>
<li>Toasty animation can now occur multiple times during gameplay.  The<br>
<code>Allow Multiple Toasties</code> preference controls whether it is played<br>
multiple times.</li>
</ul>
<h2>Bug fixes:</h2>
<ul>
<li>Fixed bug in screen filter in default theme that made it not appear under<br>
the field when a solo file was played without Center1Player.</li>
<li>Fixed crash on OS X for certain dance pads when in Japanese locale.</li>
<li>Scoring bug fixes related to radar calculation.</li>
<li>Scores on edit charts should now be loaded correctly.  Before, they were<br>
only loaded after the chart had been played in the current session.</li>
<li>Fixed bug that made steps on the same row as a stop and a bpm change<br>
unhittable. (and possibly other weird edge cases of multiple timing segments<br>
on one row, nothing should accidentally cause unhittable steps now)</li>
<li>Joining on Select Music when on Extra Stage is disabled to prevent<br>
crashing on Evaluation Summary.</li>
<li>"Do not show again" button on missing texture dialog works now.</li>
<li>If the background or banner file for a song doesn't exist when the song is<br>
cached, the cache file will have a blank path so Stepmania won't try to load<br>
the nonexistent banner or background.</li>
<li>Default key configuration for beat game type slightly tweaked, space is<br>
now the default scratch key, key7 is now mapped to right instead of key3.</li>
<li>Backwards and shuffle chart mods in beat now ignore the scratch column.</li>
<li>The AxisFix preference has been added which might fix the axis problem<br>
for some people on windows or on linux using the event driver.</li>
</ul>
<h1>Themer visible changes:</h1>
<h3>Service Menu:</h3>
<p>ScreenOptionsInputSub and ScreenOptionsDisplaySub added.  Updating a theme<br>
to show the options for the new screens should be a simple matter of<br>
changing the LineNames entry for ScreenOptionsService to include<br>
"InputOptions" and "SoundGraphics".</p>
<h3>NoteColumnRenderer</h3>
<p>Added handling for diffuse to make rainbow and related effects work.</p>
<h3>RadarValues</h3>
<p>Stream, Voltage, Air, Freeze, and Chaos are no longer capped at 1.  Stream<br>
and Voltage no longer count hold heads twice.  RadarCategory_Notes added,<br>
which counts all notes.</p>
<h3>ScreenGameplay</h3>
<p>The NoteField board is now underneath everything except the backgound.  This<br>
means underneath any custom actors on the underlay or overlay or decoration<br>
layers, and also underneath the combo/judgment even when the ComboUnderField<br>
metric is true.</p>
<h3>ToastyAchievedMessageCommand</h3>
<p>The parameter table broadcast with this message has changed it is now as follows:</p>
<pre><code>{  
PlayerNumber= pn, -- the player number of the player that earned the
toasty  
ToastyCombo= number, -- the current number of W2/W1 in a row the player has  
Level= number, -- the number of toasties earned in a row  
}
</code></pre>
<p>Adding the Level parameter allows the themer to easily set off a different<br>
effect based on how long the player has gone without breaking their toasty<br>
combo.<br>
See <code>Docs/Themerdocs/Examples/Example_Actors/Toasty.lua</code> for an example of<br>
<code>BGAnimations/ScreenGameplay toasty.lua</code> that uses these parameters.</p>
<p>The Gameplay::ToastyTriggersAt metric can be a function now, or a number.<br>
If the metric is a function, the function is passed the player number, and the player's current<br>
toasty level, and the number it returns is the number of additional steps to<br>
earn the next toasty.<br>
If the metric is a number, it is the number of additional steps to<br>
earn the next toasty.<br>
This means that <code>ToastyTriggersAt=250</code> and<br>
<code>ToastyTriggersAt=function(pn, level) return 250 end</code> have the same<br>
effect:  Toasties will be awared at 250, 500, 750, and so on.</p>
<p>The Gameplay::ToastyMinTNS metric has been added for controlling the minimum<br>
TapNoteScore needed to maintain toasty combo.</p>
<h2>Bug fixes and new functions:</h2>
<ul>
<li>Attributes added are marked with [A].</li>
<li>Bug fixes are marked with [B].</li>
<li>Functions are marked with [F].</li>
</ul>
<h3>ActorSound:</h3>
<ul>
<li>[A] IsAction attribute added.  If this is true, the sound will not be<br>
played if the MuteActions preference is true.</li>
</ul>
<h3>Global:</h3>
<ul>
<li>[F] commify</li>
<li>[F] convert_xml_bgs</li>
<li>[F] rec_print_children</li>
<li>[F] rec_print_table</li>
</ul>
<h3>XML converter</h3>
<p>A converter has been added that takes care of the simple grunt work of converting an xml bg/fg file to lua for<br>
SM5.  Read <code>Docs/Themerdocs/XmlToLua.txt</code> for details.</p>
<h1>A short digression about earning toasties</h1>
<p>A toasty is a special award for achieving a certain number of W2 or W1 steps<br>
in a row.  In the default theme, this is 250 steps in a row, and W2 is known<br>
as Perfect, and W1 is called Flawless.  The number of toasties earned is<br>
stored in the profile.  Some themes show a special animation and play a<br>
sound when a toasty is earned.<br>
The current toasty combo is the progress towards this goal.  Each note on a<br>
row counts as one point in the toasty combo, thus jumps are two, and hands<br>
are 3 or more.<br>
Hitting a step with a judgment worse than W2 breaks the toasty combo,<br>
resetting it to 0.<br>
For many years, achieving 250 W2/W1 in a row, then 1 W3, then 250 more W2/W1<br>
in a row would increment the toasty counter in the profile by 2, but only show the animation once.  Earning 500 W2/W1 in a row was still only 1 toasty.<br>
This behavior has been changed so that 500 W2/W1 in a row will increment the<br>
toasty counter twice, and show the animation twice.</p>
  </div>